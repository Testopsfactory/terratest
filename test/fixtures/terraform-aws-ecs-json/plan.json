{"format_version":"0.1","terraform_version":"0.12.20","variables":{"cluster_name":{"value":"terratest-example"},"service_name":{"value":"terratest-example"}},"planned_values":{"outputs":{"task_definition":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_ecs_cluster.example","mode":"managed","type":"aws_ecs_cluster","name":"example","provider_name":"aws","schema_version":0,"values":{"capacity_providers":null,"default_capacity_provider_strategy":[],"name":"terratest-example","tags":null}},{"address":"aws_ecs_service.example","mode":"managed","type":"aws_ecs_service","name":"example","provider_name":"aws","schema_version":0,"values":{"capacity_provider_strategy":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":0,"enable_ecs_managed_tags":false,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[],"name":"terratest-example","network_configuration":[{"assign_public_ip":false,"security_groups":null,"subnets":["subnet-50b1090a","subnet-74ec9312","subnet-e67e30ae"]}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"scheduling_strategy":"REPLICA","service_registries":[],"tags":null}},{"address":"aws_ecs_task_definition.example","mode":"managed","type":"aws_ecs_task_definition","name":"example","provider_name":"aws","schema_version":1,"values":{"container_definitions":"[{\"image\":\"terraterst-example\",\"name\":\"terratest\",\"networkMode\":\"awsvpc\"}]","cpu":"256","family":"terratest","ipc_mode":null,"memory":"512","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"tags":null,"task_role_arn":null,"volume":[]}},{"address":"aws_iam_role.execution","mode":"managed","type":"aws_iam_role","name":"execution","provider_name":"aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"terratest-example-ecs-execution","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null}},{"address":"aws_iam_role_policy_attachment.execution","mode":"managed","type":"aws_iam_role_policy_attachment","name":"execution","provider_name":"aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"}}]}},"resource_changes":[{"address":"aws_ecs_cluster.example","mode":"managed","type":"aws_ecs_cluster","name":"example","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"capacity_providers":null,"default_capacity_provider_strategy":[],"name":"terratest-example","tags":null},"after_unknown":{"arn":true,"default_capacity_provider_strategy":[],"id":true,"setting":true}}},{"address":"aws_ecs_service.example","mode":"managed","type":"aws_ecs_service","name":"example","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"capacity_provider_strategy":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":0,"enable_ecs_managed_tags":false,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[],"name":"terratest-example","network_configuration":[{"assign_public_ip":false,"security_groups":null,"subnets":["subnet-50b1090a","subnet-74ec9312","subnet-e67e30ae"]}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"scheduling_strategy":"REPLICA","service_registries":[],"tags":null},"after_unknown":{"capacity_provider_strategy":[],"cluster":true,"deployment_controller":[],"iam_role":true,"id":true,"load_balancer":[],"network_configuration":[{"subnets":[false,false,false]}],"ordered_placement_strategy":[],"placement_constraints":[],"placement_strategy":true,"platform_version":true,"service_registries":[],"task_definition":true}}},{"address":"aws_ecs_task_definition.example","mode":"managed","type":"aws_ecs_task_definition","name":"example","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"container_definitions":"[{\"image\":\"terraterst-example\",\"name\":\"terratest\",\"networkMode\":\"awsvpc\"}]","cpu":"256","family":"terratest","ipc_mode":null,"memory":"512","network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"tags":null,"task_role_arn":null,"volume":[]},"after_unknown":{"arn":true,"execution_role_arn":true,"id":true,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"revision":true,"volume":[]}}},{"address":"aws_iam_role.execution","mode":"managed","type":"aws_iam_role","name":"execution","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"terratest-example-ecs-execution","name_prefix":null,"path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"unique_id":true}}},{"address":"aws_iam_role_policy_attachment.execution","mode":"managed","type":"aws_iam_role_policy_attachment","name":"execution","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"},"after_unknown":{"id":true,"role":true}}}],"output_changes":{"task_definition":{"actions":["create"],"before":null,"after_unknown":true}},"prior_state":{"format_version":"0.1","terraform_version":"0.12.20","values":{"root_module":{"resources":[{"address":"data.aws_iam_policy_document.assume-execution","mode":"data","type":"aws_iam_policy_document","name":"assume-execution","provider_name":"aws","schema_version":0,"values":{"id":"320642683","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"policy_id":null,"source_json":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ecs-tasks.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"}},{"address":"data.aws_subnet_ids.all","mode":"data","type":"aws_subnet_ids","name":"all","provider_name":"aws","schema_version":0,"values":{"filter":null,"id":"vpc-ef757889","ids":["subnet-50b1090a","subnet-74ec9312","subnet-e67e30ae"],"tags":null,"vpc_id":"vpc-ef757889"}},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ec2:eu-west-1:748289510185:vpc/vpc-ef757889","cidr_block":"172.31.0.0/16","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-abb79dc0","cidr_block":"172.31.0.0/16","state":"associated"}],"default":true,"dhcp_options_id":"dopt-13512d75","enable_dns_hostnames":true,"enable_dns_support":true,"filter":null,"id":"vpc-ef757889","instance_tenancy":"default","ipv6_association_id":null,"ipv6_cidr_block":null,"main_route_table_id":"rtb-fde4d084","owner_id":"748289510185","state":"available","tags":{}}}]}}},"configuration":{"root_module":{"outputs":{"task_definition":{"expression":{"references":["aws_ecs_task_definition.example"]}}},"resources":[{"address":"aws_ecs_cluster.example","mode":"managed","type":"aws_ecs_cluster","name":"example","provider_config_key":"aws","expressions":{"name":{"references":["var.cluster_name"]}},"schema_version":0},{"address":"aws_ecs_service.example","mode":"managed","type":"aws_ecs_service","name":"example","provider_config_key":"aws","expressions":{"cluster":{"references":["aws_ecs_cluster.example"]},"desired_count":{"constant_value":0},"launch_type":{"constant_value":"FARGATE"},"name":{"references":["var.service_name"]},"network_configuration":[{"subnets":{"references":["data.aws_subnet_ids.all"]}}],"task_definition":{"references":["aws_ecs_task_definition.example"]}},"schema_version":0},{"address":"aws_ecs_task_definition.example","mode":"managed","type":"aws_ecs_task_definition","name":"example","provider_config_key":"aws","expressions":{"container_definitions":{"constant_value":"[\n  {\n    \"image\": \"terraterst-example\",\n    \"name\": \"terratest\",\n    \"networkMode\": \"awsvpc\"\n  }\n]\n"},"cpu":{"constant_value":256},"execution_role_arn":{"references":["aws_iam_role.execution"]},"family":{"constant_value":"terratest"},"memory":{"constant_value":512},"network_mode":{"constant_value":"awsvpc"},"requires_compatibilities":{"constant_value":["FARGATE"]}},"schema_version":1},{"address":"aws_iam_role.execution","mode":"managed","type":"aws_iam_role","name":"execution","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.assume-execution"]},"name":{"references":["var.cluster_name"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.execution","mode":"managed","type":"aws_iam_role_policy_attachment","name":"execution","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"},"role":{"references":["aws_iam_role.execution"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.assume-execution","mode":"data","type":"aws_iam_policy_document","name":"assume-execution","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["ecs-tasks.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_subnet_ids.all","mode":"data","type":"aws_subnet_ids","name":"all","provider_config_key":"aws","expressions":{"vpc_id":{"references":["data.aws_vpc.default"]}},"schema_version":0},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_config_key":"aws","expressions":{"default":{"constant_value":true}},"schema_version":0}],"variables":{"cluster_name":{"default":"terratest-example","description":"The name to set for the ECS cluster."},"service_name":{"default":"terratest-example","description":"The name to set for the ECS service."}}}}}
